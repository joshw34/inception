<h1>redis</h1>
<h2>entrypoint.sh</h2>
<p><img src="./images/entrypoint.png" alt="Redis server entrypoint script" /></p>
<h3>REDIS_PASS</h3>
<ul>
<li>Redis password generated by makefile and provided by docker secrets</li>
</ul>
<h3>cat &gt; /var/lib/redis/redis.conf &lt;&lt;EOF</h3>
<ul>
<li>
<p>Create redis config file in location writeable by non-privileged redis user</p>
</li>
<li>
<p>maxmemory 256mb = maximum amount of memory Redis is allowed to use</p>
</li>
<li>
<p>save 900 1 = after 900 seconds (15 minutes), if at least 1 key has changed, take a snapshot</p>
</li>
<li>
<p>save 300 10 = after 5 minutes, if 10 or more keys changed, snapshot</p>
</li>
<li>
<p>save 60 10000 = after 1 minute, if 10,000+ keys changed, snapshot</p>
</li>
<li>
<p>appendonly yes = Log every write operation to a file on disk, in real time. Allows rrebuilding of memory cache after container restart</p>
</li>
<li>
<p>requirepass $REDIS_PASS = set the access password. Wordpress uses this to communicate with redis</p>
</li>
<li>
<p>bind 0.0.0.0 = listen on all addresses with the docker network</p>
</li>
<li>
<p>port 6379 = standard port used for redis. Wordpress will communicate via this port</p>
</li>
<li>
<p>dir /var/lib/redis = data dir used for saving snapshots (host mount for persistence)</p>
</li>
</ul>
<p>&nbsp;</p>
<h3>exec redis-server /var/lib/redis/redis.conf</h3>
<ul>
<li>
<p>Start the server using the previously created config</p>
</li>
<li>
<p>Server becomes PID1</p>
</li>
</ul>
<p>&nbsp;</p>
<p>Return: <a title="Redis homepage" href="index.html">redis</a>&nbsp;&nbsp;<a title="Go to inception homepage" href="../index.html">home</a></p>
